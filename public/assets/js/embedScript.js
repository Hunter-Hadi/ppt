"use strict";const PRESET_HEIGHT=6400,scriptSrc=document.currentScript.src,scriptURL=new URL(scriptSrc),searchParams=scriptURL.searchParams,ref=searchParams.get("ref");if(ref){window.MAXAI_EMBED={ref:`partner_${ref}`,containerId:"maxai-embed__0965c92c-2617-11ee-be56-0242ac120002",containerDom:null,iframeDom:null,recordApi:"https://api.maxai.me/app/ref_count",post(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},iframeListener(t){if(t.data.type!=="embed")return;const e=t.data.height;e&&e>0&&window.MAXAI_EMBED.containerDom&&(window.MAXAI_EMBED.containerDom.style.height=`${e}px`)},iframeOnload(){window.MAXAI_EMBED.post(window.MAXAI_EMBED.recordApi,{data:{ref:`[iframe]_${window.MAXAI_EMBED.ref}`,date:new Date().toString()}})},async setContainerDom(t){if(!t)return!1;let e=null,n=0;const a=5,i=r=>{const o=document.getElementById(t);return o?(this.containerDom=o,r(!0)):(n++,n>a?(window.clearInterval(e),r(!1)):e=window.setTimeout(()=>{i(r)},1e3)),null};return new Promise(r=>{i(r)})},async initialization(){return searchParams.has("containerId")&&(this.containerId=searchParams.get("containerId")),!!await this.setContainerDom(this.containerId)},async startRender(){try{if(!await this.initialization())return!1;this.containerDom.style.height="6400px";const e=document.createElement("iframe");return e.src=`https://www.maxai.me/embed/partner?ref=${this.ref}`,e.width="100%",e.height="100%",e.frameBorder="0",e.allowFullScreen="true",e.onload=this.iframeOnload,this.containerDom.appendChild(e),window.addEventListener("message",this.iframeListener),window.addEventListener("beforeunload",()=>{window.removeEventListener("message",this.iframeListener)}),!0}catch{return!1}}};try{window.MAXAI_EMBED.post(window.MAXAI_EMBED.recordApi,{data:{ref:`[script]_${window.MAXAI_EMBED.ref}`,date:new Date().toString()}})}catch{}}
